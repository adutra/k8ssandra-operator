apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

patches:

  - target:
      group: traefik.containo.us
      version: v1alpha1
      kind: IngressRoute
      name: reaper-service-http-ingress
    patch: |-
      - op: replace
        path: /metadata/name
        value: "cluster1-dc2-reaper-service-http-ingress"
      - op: replace
        path: /spec/routes/0/match
        value: "HostRegexp(`reaper.my-fixture.{ip:[0-9\\.]+}.nip.io`)"
      - op: replace
        path: /spec/routes/0/services/0/name
        value: "cluster1-dc2-reaper-service"
