apiVersion: stargate.k8ssandra.io/v1alpha1
kind: Stargate
metadata:
  name: s1
spec:
  datacenterRef:
    name: dc1
  # First rack will get 2 Stargate pods, each in a distinct deployment, so that
  # the very first Stargate deployment contains exactly one replica.
  # Second rack with get 2 Stargate pods, both grouped together in one single
  # deployment.
  size: 4
  allowStargateOnDataNodes: true
  heapSize: 384Mi
  resources:
    limits:
      memory: 512Mi
  livenessProbe:
    initialDelaySeconds: 100
    periodSeconds: 10
    failureThreshold: 20
    successThreshold: 1
    timeoutSeconds: 20
  readinessProbe:
    initialDelaySeconds: 100
    periodSeconds: 10
    failureThreshold: 20
    successThreshold: 1
    timeoutSeconds: 20
  cassandraConfigMapRef:
    name: cassandra-config
  containerImage:
    repository: stargateio
    name: "stargate-3_11"
    tag: "v1.0.45"
    pullPolicy: Always
